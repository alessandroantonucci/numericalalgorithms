\documentclass[professionalfonts,handout]{beamer}
\input{mycommands.sty}
\title{Algoritmi Numerici (Parte I)}
\subtitle{[Lezione 5] Formato float, mantissa denormalizzata ed errore di rappresentazione}
\author{Alessandro Antonucci\\{\tt alessandro.antonucci@supsi.ch}}
\date{}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\maketitle
\frame{\frametitle{Il formato {\tt float} a 32 bit (ripasso)}
\setstretch{1.4}
\begin{center}
\begin{tikzpicture}[scale=.5]
\draw (-3,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (-2,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (-1,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (0,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (1,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (2,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (3,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (4,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (5,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (6,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (7,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (8,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (9,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (10,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (11,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (12,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (13,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (16,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (17,0) +(-.5,-.5) rectangle ++(.5,.5);
\draw (-3,0) node{\tiny $b_1$}; \draw (-2,0) node{\tiny $b_2$}; \draw (-1,0) node{\tiny $b_3$}; \draw (0,0) node{\tiny $b_4$}; \draw (1,0) node{\tiny $b_5$}; \draw (2,0) node{\tiny $b_6$}; \draw (3,0) node{\tiny $b_7$}; \draw (4,0) node{\tiny $b_8$}; \draw (5,0) node{\tiny $b_9$}; \draw (6,0) node{\tiny $b_{10}$}; \draw (7,0) node{\tiny $b_{11}$}; \draw (8,0) node{\tiny $b_{12}$}; \draw (9,0) node{\tiny $b_{13}$}; \draw (10,0) node{\tiny $b_{14}$}; \draw (11,0) node{\tiny $b_{15}$}; \draw (12,0) node{\tiny $b_{16}$}; \draw (13,0) node{\tiny $b_{17}$}; \draw (16,0) node{\tiny $b_{31}$}; \draw (17,0) node{\tiny $b_{32}$}; \draw (14.5,0) node{$\ldots$}; 
\filldraw[color=red!40,semitransparent] (-3.5,-.50) rectangle (-2.5,.9);
\filldraw[color=green!40,semitransparent] (-2.5,-.50) rectangle (5.5,.9);
\filldraw[color=blue!40,semitransparent] (5.5,-.50) rectangle (17.5,.9);
\draw (-3,+.8) node{\tiny segno};
\draw (2,+.8) node{\tiny esponente};
\draw (11,+.8) node{\tiny mantissa};
\end{tikzpicture}
\end{center}
\begin{itemize}
\item IF $b_1=0$ THEN segno = +1 \vskip 1mm ELSE segno = -1
\item esponente = {\tt horner}$(b_2 b_3 \ldots b_9)$ - 127
\item mantissa = $1.[b_{10} b_{11} \ldots b_{32}]_2$
\item numero = segno $\cdot$ mantissa $\cdot$ $2^\mathrm{esponente}$
\item RETURN numero
\end{itemize}}
\frame{\frametitle{Il formato {\tt double} a 64 bit}
\setstretch{1.4}
\begin{center}
\begin{tikzpicture}[scale=.5]
\draw (-3,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (-2,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (-1,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (0,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (1,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (2,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (3,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (4,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (5,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (6,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (7,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (8,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (9,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (10,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (11,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (12,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (13,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (16,0) +(-.5,-.5) rectangle ++(.5,.5); \draw (17,0) +(-.5,-.5) rectangle ++(.5,.5);
\draw (-3,0) node{\tiny $b_1$}; \draw (-2,0) node{\tiny $b_2$}; \draw (-1,0) node{\tiny $b_3$}; \draw (0,0) node{\tiny $b_4$}; \draw (1,0) node{\tiny $b_5$}; \draw (2,0) node{\tiny $b_6$}; \draw (3,0) node{\tiny $b_7$}; \draw (4,0) node{\tiny $b_8$}; \draw (5,0) node{\tiny $b_9$}; \draw (6,0) node{\tiny $b_{10}$}; \draw (7,0) node{\tiny $b_{11}$}; \draw (8,0) node{\tiny $b_{12}$}; \draw (9,0) node{\tiny $b_{13}$}; \draw (10,0) node{\tiny $b_{14}$}; \draw (11,0) node{\tiny $b_{15}$}; \draw (12,0) node{\tiny $b_{16}$}; \draw (13,0) node{\tiny $b_{17}$}; \draw (16,0) node{\tiny $b_{63}$}; \draw (17,0) node{\tiny $b_{64}$}; \draw (14.5,0) node{$\ldots$}; 
\draw (-3,+.8) node{\tiny segno};
\filldraw[color=red!40,semitransparent] (-3.5,-.50) rectangle (-2.5,.9);
\filldraw[color=green!40,semitransparent] (-2.5,-.50) rectangle (8.5,.9);
\filldraw[color=blue!40,semitransparent] (8.5,-.50) rectangle (17.5,.9);
\draw (3,+.8) node{\tiny esponente};
\draw (13,+.8) node{\tiny mantissa};
\end{tikzpicture}
\end{center}
\begin{itemize}
\item 1/11/52 bits per segno/esponente/mantissa \exe{(anzich\'e 1/8/23)}
\item Esponente - 1023 ($=2^{11-1}-1$ \exe{anzich\'e $127=2^{8-1}-1$})
\end{itemize}
\begin{itemize}
\item IF $b_1=0$ THEN segno = +1 ELSE segno = -1
\item esponente = {\tt horner}$(b_2 b_3 \ldots b_{12})$ - 1023
\item mantissa = $1.[b_{13} b_{14} \ldots b_{64}]_2$
\end{itemize}}

\frame{\frametitle{Un formato float-like a 5 bit}
\begin{columns}
\begin{column}[T]{0.1\textwidth}
\end{column}
\begin{column}[T]{0.5\textwidth}
\tiny
1/2/2 bit per segno/espo/mantissa, espo - $2^{2-1}-1=1$
\small
\vskip 2mm
$0|00|00 \to + 1.00_2 \cdot 2^{-1}= 0.5$\\
$0|00|01 \to + 1.01_2 \cdot 2^{-1}=0.625$\\
$0|00|10 \to + 1.10_2 \cdot 2^{-1}=0.75$\\
$0|00|11 \to + 1.11_2 \cdot 2^{-1}=0.875$\\
$0|01|00 \to + 1.00_2 \cdot 2^0=1$\\
$0|01|01 \to + 1.01_2 \cdot 2^0=1.25$\\
$0|01|10 \to + 1.10_2 \cdot 2^0=1.5$\\
$0|01|11 \to + 1.11_2 \cdot 2^0=1.75$\\
$0|10|00 \to + 1.00_2 \cdot 2^1=2$\\
$0|10|01 \to + 1.01_2 \cdot 2^1=2.5$\\
$0|10|10 \to + 1.10_2 \cdot 2^1=3$\\
$0|10|11 \to + 1.11_2 \cdot 2^1=3.5$\\
$0|11|00 \to + 1.00_2 \cdot 2^2=4$\\
$0|11|01 \to + 1.01_2 \cdot 2^2=5$\\
$0|11|10 \to + 1.10_2 \cdot 2^2=6$\\
$0|11|11 \to + 1.11_2 \cdot 2^2=7$
\end{column}
\begin{column}[T]{0.4\textwidth}
\begin{tikzpicture}[scale=.5]
\draw[->,thick] (0,-8) -- (0,8);
\draw[left,thick] (.2,7) -- (-.2,7) node[] {\tiny 7};
\draw[left,thick] (.2,6) -- (-.2,6) node[] {\tiny 6};
\draw[left,thick] (.2,5) -- (-.2,5) node[] {\tiny 5};
\draw[left,thick] (.2,4) -- (-.2,4) node[] {\tiny 4};
\draw[right,thick] (-.2,3.5) -- (.2,3.5) node[] {\tiny 3.5};
\draw[right,thick] (-.2,3) -- (.2,3) node[] {\tiny 3};
\draw[right,thick] (-.2,2.5) -- (.2,2.5) node[] {\tiny 2.5};
\draw[right,thick] (-.2,2) -- (.2,2) node[] {\tiny 2};
\draw[left,thick] (.2,1.75) -- (-.2,1.75) node[] {\tiny 1.75};
\draw[left,thick] (.2,1.5) -- (-.2,1.5) node[] {};
\draw[left,thick] (.2,1.25) -- (-.2,1.25) node[] {};
\draw[left,thick] (.2,1) -- (-.2,1) node[] {\tiny 1};
\draw[right,thick] (-.2,.875) -- (.2,.875) node[] {\tiny .875};
\draw[right,thick] (-.2,.75) -- (.2,.75) node[] {};
\draw[right,thick] (-.2,.625) -- (.2,.625) node[] {};
\draw[right,thick] (-.2,.5) -- (.2,.5) node[] {\tiny .5};
\draw[right,thick] (-.2,-.875) -- (.2,-.875) node[] {\tiny -.875};
\draw[right,thick] (-.2,-.75) -- (.2,-.75) node[] {};
\draw[right,thick] (-.2,-.625) -- (.2,-.625) node[] {};
\draw[right,thick] (-.2,-.5) -- (.2,-.5) node[] {\tiny -.5};
\draw[left,thick] (.2,-1) -- (-.2,-1) node[] {\tiny -1};
\draw[left,thick] (.2,-1.25) -- (-.2,-1.25) node[] {};
\draw[left,thick] (.2,-1.5) -- (-.2,-1.5) node[] {};
\draw[left,thick] (.2,-1.75) -- (-.2,-1.75) node[] {\tiny -1.75};
\draw[right,thick] (-.2,-2) -- (.2,-2) node[] {\tiny -2};
\draw[right,thick] (-.2,-2.5) -- (.2,-2.5) node[] {\tiny -2.5};
\draw[right,thick] (-.2,-3) -- (.2,-3) node[] {\tiny -3};
\draw[right,thick] (-.2,-3.5) -- (.2,-3.5) node[] {\tiny -3.5};
\draw[left,thick] (.2,-4) -- (-.2,-4) node[] {\tiny -4};
\draw[left,thick] (.2,-5) -- (-.2,-5) node[] {\tiny -5};
\draw[left,thick] (.2,-6) -- (-.2,-6) node[] {\tiny -6};
\draw[left,thick] (.2,-7) -- (-.2,-7) node[] {\tiny -7};
\end{tikzpicture}\end{column}\end{columns}}

\frame{\frametitle{I formati float-like}
\begin{block}{Vantaggio}
Numeri macchina vicini fra loro vicino allo zero \\
pi\`u distanti per numeri grandi (in valore assoluto)
\vskip 1mm
Errore di rappresentazione cresce in termini assoluti,\\
costante in termini relativi
\end{block}
\vskip 2mm
\begin{block}{Svantaggio}
numero macchina pi\`u piccolo in valore assoluto $\neq 0$\\
\vskip 1mm
$0|00000000|00\ldots 00 = + 1.0 \cdot 2^{-127} = \frac{1}{2^{127}} \neq 0$\\
$1|00000000|00\ldots 00 = - 1.0 \cdot 2^{-127} = -\frac{1}{2^{127}}$
\end{block}}

\frame{\frametitle{Mantissa denormalizzata}
\begin{block}{{Eccezione} al formato {\tt float} per avere $0$ numero macchina}
\begin{itemize}
\item IF $(b_2,\ldots,b_9)=(000000000)$ THEN
\item mantissa = $0.[b_{10} b_{11} \ldots b_{32}]_2$ (denormalizzata)
\item esponente = -126 (e non 0-127=-127)
\end{itemize}
\end{block}
Cos\`i $0|00000000|0\ldots 0=+0.0$ e $1|00000000|0\ldots 0=-0.0$
\vskip 3mm
\begin{itemize}
\item Zero macchina ($0_m$) pi\`u piccolo numero macchina (non zero)
\item Mantissa denormalizzata produce $0_m$ molto pi\`u piccolo
\item Stessa cosa per {\tt double}, con -1022
\item Se $(b_2,\ldots,b_9)=(111111111)$ eccezioni per $\pm \infty$ e $NaN$
\end{itemize}}


\frame{\frametitle{Stima dell'errore di rappresentazione}
\setstretch{1.4}
\begin{itemize} 
\item Rappresentazione float $x_m = \pm 1.[b_{10},b_{11},\ldots,b_{32}]_2 \cdot 2^p$
\item ``Vero'' numero $x =  \pm 1.[b_{10} b_{11} \ldots b_{32} b_{33} b_{34} \ldots]_2 \cdot 2^p$
\item Se il formato float facesse troncamento: $\epsilon_a = |x - x_m| = \left| 0.[00 \ldots 0b_{33} b_{34} \ldots]_2 \right| \cdot 2^p$
\item $\epsilon_a = |x - x_m| = |0.[b_{33}b_{34}\ldots]_2| 2^{p-23}<2^{p-23}$
\item $\epsilon_r = | \frac{x_m-x}{x} | = \frac{\epsilon_a}{|x|} < \frac{2^{p-24}}{|x|} < 2^{-23}$
perch\'e $x \geq 1.0000 \cdot 2^{p}$
\item Il formato float arrotonda, le stime per gli errori sono esattamente la met\`a!
\end{itemize}
}

\frame{\frametitle{Stima dell'errore di rappresentazione (ii)}
\setstretch{1.4}
\begin{itemize} 
\item Se $p$ \`e l'esponente del numero da rappresentare (in base 2 e con mantissa normalizzata)
\item Se $s$ \`e il numero di bit a disposizione per la mantissa
\end{itemize}
\begin{columns}
\begin{column}[T]{0.5\textwidth}
\begin{block}{\small con TRONCAMENTO}
\begin{center}
$\epsilon_a < 2^{p-s}$
\vskip 1mm
$\epsilon_r < 2^{-s}$
\end{center}
\end{block}
\end{column}
\begin{column}[T]{0.5\textwidth}
\begin{block}{\small con ARROTONDAMENTO}
\begin{center}
$\epsilon_a < 2^{p-s-1}$
\vskip 1mm
$\epsilon_r < 2^{-s-1}$
\end{center}
\end{block}
\end{column}
\end{columns}
\vskip 1mm \small
Es. {\tt float} $\epsilon_r < 2^{-24} \simeq 6 \cdot 10^{-8}$, 7/8 cifre corrette in decimale\\
Es. {\tt double} $\epsilon_r < 2^{-53} \simeq 1.1 \cdot 10^{-16}$, 15/16 cifre corrette}


\frame{\frametitle{Esercizio}
\Large
\begin{center}
Analizza come si modifica il formato a 5 bit
\vskip 1mm
introdotto precedentemente 
\vskip 1mm
quando si considera anche l'eccezione
\vskip 1mm
per la mantissa denormalizzata 
\end{center}}

\frame{\frametitle{Soluzione}
\begin{columns}
\begin{column}[T]{0.1\textwidth}
\end{column}
\begin{column}[T]{0.5\textwidth}
\tiny
1/2/2 bit per segno/espo/mantissa, espo - $2^{2-1}-1=1$
\small
\vskip 2mm
$0|00|00 \to + 0.00_2 \cdot 2^{0}= 0.0$\\
$0|00|01 \to + 0.01_2 \cdot 2^{0}=0.25$\\
$0|00|10 \to + 0.10_2 \cdot 2^{0}=0.5$\\
$0|00|11 \to + 0.11_2 \cdot 2^{0}=0.75$\\
$0|01|00 \to + 1.00_2 \cdot 2^0=1$\\
$0|01|01 \to + 1.01_2 \cdot 2^0=1.25$\\
$0|01|10 \to + 1.10_2 \cdot 2^0=1.5$\\
$0|01|11 \to + 1.11_2 \cdot 2^0=1.75$\\
$0|10|00 \to + 1.00_2 \cdot 2^1=2$\\
$0|10|01 \to + 1.01_2 \cdot 2^1=2.5$\\
$0|10|10 \to + 1.10_2 \cdot 2^1=3$\\
$0|10|11 \to + 1.11_2 \cdot 2^1=3.5$\\
$0|11|00 \to + 1.00_2 \cdot 2^2=4$\\
$0|11|01 \to + 1.01_2 \cdot 2^2=5$\\
$0|11|10 \to + 1.10_2 \cdot 2^2=6$\\
$0|11|11 \to + 1.11_2 \cdot 2^2=7$
\end{column}
\begin{column}[T]{0.4\textwidth}
\begin{tikzpicture}[scale=.5]
\draw[->,thick] (0,-8) -- (0,8);
\draw[left,thick] (.2,7) -- (-.2,7) node[] {\tiny 7};
\draw[left,thick] (.2,6) -- (-.2,6) node[] {\tiny 6};
\draw[left,thick] (.2,5) -- (-.2,5) node[] {\tiny 5};
\draw[left,thick] (.2,4) -- (-.2,4) node[] {\tiny 4};
\draw[right,thick] (-.2,3.5) -- (.2,3.5) node[] {\tiny 3.5};
\draw[right,thick] (-.2,3) -- (.2,3) node[] {\tiny 3};
\draw[right,thick] (-.2,2.5) -- (.2,2.5) node[] {\tiny 2.5};
\draw[right,thick] (-.2,2) -- (.2,2) node[] {\tiny 2};
\draw[left,thick] (.2,1.75) -- (-.2,1.75) node[] {\tiny 1.75};
\draw[left,thick] (.2,1.5) -- (-.2,1.5) node[] {};
\draw[left,thick] (.2,1.25) -- (-.2,1.25) node[] {};
\draw[left,thick] (.2,1) -- (-.2,1) node[] {\tiny 1};
\draw[right,thick] (-.2,.75) -- (.2,.75) node[] {\tiny .75};
\draw[left,thick] (.2,.5) -- (-.2,.5) node[] {\tiny .5};
\draw[right,thick] (-.2,.25) -- (.2,.25) node[] {\tiny .25};
\draw[left,thick] (.2,0) -- (-.2,.0) node[] {\tiny $\pm$ 0};
\draw[right,thick] (-.2,-.75) -- (.2,-.75) node[] {\tiny -.75};
\draw[left,thick] (.2,-.5) -- (-.2,-.5) node[] {\tiny -.5};
\draw[right,thick] (-.2,-.25) -- (.2,-.25) node[] {\tiny -.25};
\draw[left,thick] (.2,-1) -- (-.2,-1) node[] {\tiny -1};
\draw[left,thick] (.2,-1.25) -- (-.2,-1.25) node[] {};
\draw[left,thick] (.2,-1.5) -- (-.2,-1.5) node[] {};
\draw[left,thick] (.2,-1.75) -- (-.2,-1.75) node[] {\tiny -1.75};
\draw[right,thick] (-.2,-2) -- (.2,-2) node[] {\tiny -2};
\draw[right,thick] (-.2,-2.5) -- (.2,-2.5) node[] {\tiny -2.5};
\draw[right,thick] (-.2,-3) -- (.2,-3) node[] {\tiny -3};
\draw[right,thick] (-.2,-3.5) -- (.2,-3.5) node[] {\tiny -3.5};
\draw[left,thick] (.2,-4) -- (-.2,-4) node[] {\tiny -4};
\draw[left,thick] (.2,-5) -- (-.2,-5) node[] {\tiny -5};
\draw[left,thick] (.2,-6) -- (-.2,-6) node[] {\tiny -6};
\draw[left,thick] (.2,-7) -- (-.2,-7) node[] {\tiny -7};
\end{tikzpicture}\end{column}\end{columns}}

\frame{\frametitle{Esercizio 1}
\setstretch{1.4}
\begin{itemize}
\item Scrivere la sequenza che codifica il numero x=50.02 secondo le regole del formato {\tt float}
\item Se il numero non \`e un numero macchina calcolare l'errore assoluto verificando che sia inferiore al valore di stima pessimistica
\item Ripetere la stessa analisi per l'errore relativo
\end{itemize}}

\frame{\frametitle{Esercizio 1 (i)}
Converto separatamente il 50 ed il .02 in base 2
\begin{columns}
\begin{column}[T]{0.1\textwidth}
\end{column}
\begin{column}[T]{0.4\textwidth}
\vskip 5mm
50 mod 2 = 0\\
25 mod 2 = 1\\
12 mod 2 = 0\\
6 mod 2 = 0\\
3 mod 2 = 1\\
1 mod 2 = 1
\vskip 2mm
$50 = 110010_2$
\end{column}
\begin{column}[T]{0.4\textwidth}
\vskip 5mm
\tiny
int(.02 x 2) = 0\\
int(.04. x 2) = 0\\
int(.08. x 2) = 0\\
int(.16 x 2) = 0\\
int(.32 x 2) = 0\\
int(.64 x 2) = 1\\
int(.28 x 2) = 0\\
int(.56 x 2) = 1\\
int(.12 x 2) = 0\\
int(.24 x 2) = 0\\
int(.48 x 2) = 0\\
int(.96 x 2) = 1\\
int(.92 x 2) = 1\\
int(.84 x 2) = 1\\
int(.68 x 2) = 1\\
int(.36 x 2) = 0\\
int(.72 x 2) = 1\\
int(.44 x 2) = 0\\
int(.88 x 2) = 1\\
int(.76 x 2) = 1\\
int(.52 x 2) = 1\\
int(.04 x 2) =
\vskip 2mm
$0.02 = 0.0\overline{00001010001111010111}_2$
\end{column}
\end{columns}}

\frame{\frametitle{Esercizio 1 (ii)}
50.02 = $110010.0\overline{00001010001111010111}_2$
\vskip 2mm
In notazione scientifica $+1.100100\overline{00001010001111010111} \cdot 2^{5}$
\vskip 2mm
Esponente 5 come qualcosa meno 127, il valore \`e 132
\vskip 2mm
132 come un numero naturale in base 2 ad 8 bit
{\small
\vskip 2mm
132 mod 2 = 0\\
66 mod 2 = 0\\
33 mod 2 = 1\\
16 mod 2 = 0\\
8 mod 2 = 0\\
4 mod 2 = 0\\
2 mod 2 = 0\\
1 mod 2 = 1}
\vskip 2mm
132 = 1000|0100
}


\frame{\frametitle{Esercizio 1 (iii)}
in grigio i bit della mantissa dopo il 23-esimo
\vskip 2mm
$+1.100100\overline{00001010001111010\color{black!30}{111}} \cdot 2^{\mathrm{Horner}(1000|0100)-127}$
\vskip 2mm
Con troncamento, approssimo per difetto:
\vskip 2mm
$+1.10010000001010001111010 \cdot 2^{\mathrm{Horner}(1000|0100)-127}$
\vskip 2mm
Ma il formato float fa arrotondamento,\vskip 1mm
approssimo per eccesso (primo bit fuori uno):
\vskip 2mm
$x = +1.10010000001010001111011 \cdot 2^{\mathrm{Horner}(1000|0100)-127}$
\vskip 2mm
ovvero 
\vskip 2mm
0|10000100|10010000001010001111011 $\to$ 4248147B}
\frame{\frametitle{Esercizio 1 (iv)}
Per valutare l'errore assoluto leggo il numero macchina:
\vskip 2mm
$0|10000100|10010000001010001111011$
\vskip 2mm
$+1.10010000001010001111011 \cdot 2^5 =$ 
\vskip 2mm
$110010.000001010001111011$
\vskip 2mm
A sx della virgola 50
\vskip 2mm
A dx (in esadecimale) .0000|0101|0001|1110|1100=.051EC
}

\frame{\frametitle{Esercizio 1 (v)}
C/16 + E = 12/16+14 = 14.75\\
14.75/16+1 = 1.921785\\
1.921785/16+5 = 5.1201171875\\
5.1201171875/16+0 = 0.32000732421875\\
0.32000732421875/16 = 0.020000457763671875\\
\vskip 3mm
Il numero macchina e' quindi 50.020000457763671875
\vskip 2mm
 (leggermente piu' grande di 50.02 in seguito all'approssimazione per eccesso)
\vskip 2mm
L'errore "esatto" \`e quindi
$0.000000457763671875 = 4.57763671875 10^{-7}$
\vskip 1mm
minore del valore di stima pessimistico (errore assoluto per arrotondamento con 23 bit di mantissa)\\
\vskip 1mm
$2^{p-s-1}=2^{5-23-1}=2^{-19}=\frac{1}{524288} \simeq 1.9073\cdot 10^{-6}$}

\frame{\frametitle{Esercizio 1 (vi)}
Per l'errore relativo
\vskip 2mm
Valore ``esatto''\\
$\epsilon_r = 0.000000457763671875/50.02 \simeq 9.151612792383045 \cdot 10^{-9}$
\vskip 2mm
Valore pessimistico $2^{-24} \simeq 
5.960464477539063\cdot 10^{-8}$
\vskip 2mm
La formula \`e rispettata
}
\frame{\frametitle{Esercizio 2}
Scrivere il numero $-0.5 \cdot 2^{-128}$ secondo le regole del formato float.
\vskip 2mm
$-0.5 \cdot 2^{-128} = -.1_2 2^{-128} = - 1.0 2^{-129}$
\vskip 2mm
L'esponente -129 non si pu\`o esprimere come $k-127$
\vskip 2mm
Devo lavorare con mantissa denormalizzata
$-1.0 \cdot 2^{-3} \cdot 2^{-126} =-0.001 \cdot 2^{-126}$
\vskip 2mm
sequenza bit
$1|00000000|0010 \ldots 0 \to 80010000$
}

\frame{\frametitle{Esercizio 3}
Scrivere il numero $2^{-128}+2^{-150}$ secondo le regole del formato float.
\vskip 2mm
Raccolgo $2^{-128}$:
\vskip 1mm
$2^{-128} (1+2^{-22}) = + 1.\overbrace{00\ldots00}^{21 zeri}1 \cdot 2^{-128}$
\vskip 1mm
Esponente $-128$: troppo piccolo per mantissa normalizzata!
\vskip 2mm
Uso mantissa denormalizzata, esponente $=-126$, virgola mantissa si sposta di due posizioni a sx per compensare:
\begin{center}
$+0.01\overbrace{00\ldots00}^{21 zeri}1 \cdot 2^{-126}$
\end{center}
24 bit dopo virgola, approssimo a: $+0.\overbrace{0100\ldots01}^{23 bits} \cdot 2^{-126}$
Sequenza 32 bits: {\footnotesize 0|00000000|01000000000000000000001}}
\end{document}
